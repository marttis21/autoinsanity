<script>
    // get models when brand is selected
    var $brand = $('#brand');
    $brand.change(function () {
        var $form = $(this).closest('form');
        var data = { };
        var classes = $('#model').attr('class');

        data[$brand.attr('name')] = $brand.val();
        $.ajax({
            url : "{{ url('detailed_search') }}",
            type: $form.attr('method'),
            data : data,
            success: function(html) {
                $('#model').replaceWith($(html).find('#model'));
                $('#model').attr('class', classes)
            }
        });
    });

    // get cities when country is selected
    var $country = $('#country');
    $country.change(function () {
        var $form = $(this).closest('form');
        var data = { };
        var classes = $('#city').attr('class');
        data[$country.attr('name')] = $country.val();
        $.ajax({
            url : "{{ url('detailed_search') }}",
            type: $form.attr('method'),
            data : data,
            success: function(html) {
                $('#city').replaceWith($(html).find('#city'))
                $('#city').attr('class', classes)
            }
        });
    });
</script>
